# Amazon-Ref-Links-Generator-Bot

[![API](https://img.shields.io/badge/Telegram%20Bot%20API-November%2020%2C%202020-36ade1.svg)](https://core.telegram.org/bots/api)
![PHP](https://img.shields.io/badge/php-%3E%3D5.3-8892bf.svg)
![Build](https://travis-ci.com/EddyDevProject/Amazon-Ref-Links-Generator-Bot.svg?branch=main)


Simple Telegram bot to generate Amazon ref links

# Requirements
- Telegram Bot Token.
- Amazon Partner ID.
- Bit.ly Token.

# Setup
Go to main.php. Change $token with your Telegram bot token.
You can get one simply with [@BotFather](https://core.telegram.org/bots#botfather) with simple commands right after creating your bot.
 ```
$token = "xxx.xxxxxxxxxxx";
```
Add your Amazon Partner ID (example mine is eddydev00-21). You can find it on the Amazon affiliation site.
```
$tag = "$pre"."eddydev00-21";
```
Change also bit.ly token
```
.."Authorization: Bearer xxx.xxxxxxxx",
```
# Webook Configuration

To set the bot webhook just type this url by modifying the TOKEN and URL parameters
```
https://api.telegram.org/botTOKEN/setWebhook?url=URL/bot.php
```
# Link Generator

In the class.php file there is a class called AmazonShorter, through this you can generate your Amazon ref link.
Example of use:
```
$short = new AmazonShorter($link);
$short->UrlTag(); //adds the tag to the end of the url
echo $short->UrlShortner(); //print short url generated by bit.ly

```
# How to send Telegram message

You can use sendMessage function in class.php
Example of use:
```
if($msg == "/start"){ //check if the message sent by the user is equal to / start
sendMessage($chat_id, "Hello World"); //send to $chat_id(id of user) message Hello World
}

```
# Disclaimer 

To check if the generated url is correctly connected to your Amazon account you can go [here](https://affiliate-program.amazon.com/home/tools/linkchecker?ac-ms-src=ac-nav).



